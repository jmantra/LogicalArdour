<?xml version="1.0" encoding="UTF-8"?>
<Route version="7003" id="4442" name="GM Session" default-type="midi" strict-io="1" active="1" denormal-protection="0" meter-point="MeterPostFader" disk-io-point="DiskIOPreFader" meter-type="MeterPeak" midi-playlist="4359" saved-meter-point="MeterPostFader" alignment-choice="Automatic" playback-channel-mode="AllChannels" capture-channel-mode="AllChannels" playback-channel-mask="0xffff" capture-channel-mask="0xffff" note-mode="Sustained" step-editing="0" input-active="1" restore-pgm="1">
  <ProgramVersion created-with="Ardour 8.4.0~ds1-2ubuntu8" modified-with="Ardour 8.4.0~ds1-2ubuntu8" name="GM Session"/>
  <PresentationInfo order="3" flags="MidiTrack,OrderSet,TriggerTrack" color="4289374975"/>
  <Controllable name="solo" id="4403" flags="Toggle,RealTime" value="0" self-solo="0" soloed-by-upstream="0" soloed-by-downstream="0"/>
  <Controllable name="solo-iso" id="4662" flags="Toggle,RealTime" value="0" solo-isolated="0"/>
  <Controllable name="solo-safe" id="4663" flags="Toggle" value="0" solo-safe="0"/>
  <IO name="Ace Fluid Synth Session" id="4443" direction="Input" default-type="midi">
    <Port name="Ace Fluid Synth Session/midi_in 1" type="midi" direction="Input">
      <Connection other="x-virtual-keyboard"/>
      <ExtConnection for="JACK"/>
      <ExtConnection for="JACK" other="Midi-Bridge:AKAI MPK mini 3 at usb-0000:00:14-0-2-2-4- full speed:(capture_0) MPK mini 3 MIDI 1"/>
      <ExtConnection for="JACK" other="ardour:x-virtual-keyboard"/>
    </Port>
  </IO>
  <IO name="Ace Fluid Synth Session" id="4444" direction="Output" default-type="midi">
    <Port name="Ace Fluid Synth Session/audio_out 1" type="audio" direction="Output">
      <Connection other="Master/audio_in 1"/>
      <Connection other="Master/audio_in 2"/>
    </Port>
    <Port name="Ace Fluid Synth Session/audio_out 2" type="audio" direction="Output"/>
    <Port name="Ace Fluid Synth Session/midi_out 1" type="midi" direction="Output"/>
  </IO>
  <MuteMaster mute-point="PostFader,Listen,Main,SurroundSend" muted="0"/>
  <Controllable name="mute" id="4664" flags="Toggle,RealTime" value="0"/>
  <Controllable name="phase" id="4665" flags="Toggle" value="0" phase-invert=""/>
  <Automation>
    <AutomationList automation-id="solo" id="4666" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
    <AutomationList automation-id="solo-iso" id="4667" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
    <AutomationList automation-id="solo-safe" id="4668" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
    <AutomationList automation-id="mute" id="4669" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
    <AutomationList automation-id="rec-enable" id="4670" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
    <AutomationList automation-id="rec-safe" id="4671" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
    <AutomationList automation-id="phase" id="4672" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
    <AutomationList automation-id="monitor" id="4673" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
    <AutomationList automation-id="midi-velocity" id="4674" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
  </Automation>
  <Pannable>
    <Controllable name="pan-azimuth" id="4445" flags="" value="0.5"/>
    <Controllable name="pan-width" id="4446" flags="" value="0"/>
    <Controllable name="pan-elevation" id="4447" flags="" value="0"/>
    <Controllable name="pan-frontback" id="4448" flags="" value="0"/>
    <Controllable name="pan-lfe" id="4449" flags="" value="0"/>
    <Automation>
      <AutomationList automation-id="pan-azimuth" id="4450" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="pan-elevation" id="4451" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="pan-width" id="4452" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="pan-frontback" id="4453" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="pan-lfe" id="4454" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
    </Automation>
  </Pannable>
  <Processor id="4455" name="recorder:General MIDI Synth" active="1" user-latency="0" use-user-latency="0" type="diskwriter" record-safe="0"/>
  <Processor id="4456" name="player:General MIDI Synth" active="1" user-latency="0" use-user-latency="0" type="diskreader"/>
  <Processor id="4457" name="TriggerBox" active="1" user-latency="0" use-user-latency="0" type="triggerbox" data-type="midi" order="2">
    <Triggers>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="0" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="1" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="2" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="3" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="4" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="5" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="6" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="7" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="8" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="9" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="10" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="11" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="12" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="13" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="14" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
      <Trigger name="" gain="1" color="3200171775" follow-count="1" use-follow-length="0" follow-length="1|0|0" legato="0" velocity-effect="0" follow-action-probability="0" quantization="1|0|0" launch-style="OneShot" follow-action-0="Again:0" follow-action-1="Stop:0" stretchable="1" cue_isolated="0" allow_patch_changes="1" stretch_mode="Crisp" index="15" segment-tempo="0" start="b0" used-channels="0" channel-map="-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1"/>
    </Triggers>
  </Processor>
  <Processor id="4506" name="Polarity" active="1" user-latency="0" use-user-latency="0" type="polarity"/>
  <Processor id="4546" name="Arpeggiator" active="1" user-latency="0" use-user-latency="0" type="luaproc" unique-id="d4c8a70056e870a4a42ae26ee6f1c3220d53e14a" count="1" custom="0">
    <Automation>
      <AutomationList automation-id="parameter-0" id="4547" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-1" id="4548" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-2" id="4549" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-3" id="4550" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-4" id="4551" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-5" id="4552" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-6" id="4553" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-7" id="4554" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-8" id="4555" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-9" id="4556" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-10" id="4557" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-11" id="4558" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
    </Automation>
    <ConfiguredInput>
      <Channels type="midi" count="1"/>
    </ConfiguredInput>
    <CustomSinks>
      <Channels type="midi" count="1"/>
    </CustomSinks>
    <ConfiguredOutput>
      <Channels type="midi" count="1"/>
    </ConfiguredOutput>
    <PresetOutput/>
    <InputMap-0>
      <Channelmap type="midi" from="0" to="0"/>
    </InputMap-0>
    <OutputMap-0>
      <Channelmap type="midi" from="0" to="0"/>
    </OutputMap-0>
    <ThruMap/>
    <luaproc last-preset-uri="urn:lua:220992b104c4e1a36e9dd2e73bad9e7c3a28f794" last-preset-label="session" parameter-changed-since-last-preset="1">
      <script lua="Lua 5.3" origin="/usr/share/ardour8/scripts/simple_arp.lua">YXJkb3VyIHsKICAgWyJ0eXBlIl0gICAgPSAiZHNwIiwKICAgbmFtZSAgICAgICAgPSAiQXJwZWdnaWF0b3IiLAogICBjYXRlZ29yeSAgICA9ICJFZmZlY3QiLAogICBhdXRob3IgICAgICA9ICJBbGJlcnQgR3LDpGYiLAogICBsaWNlbnNlICAgICA9ICJNSVQiLAogICBkZXNjcmlwdGlvbiA9IFtbc2ltcGxlX2FycCB2MC4zCgpTaW1wbGUgbW9ub3Bob25pYyBhcnBlZ2dpYXRvciBleGFtcGxlIHdpdGggc2FtcGxlLWFjY3VyYXRlIHRyaWdnZXJpbmcsIGRlbW9uc3RyYXRlcyBob3cgdG8gcHJvY2VzcyB0aGUgbmV3IHRpbWVfaW5mbyBkYXRhIGFsb25nIHdpdGggQkJUIGluZm8gZnJvbSBBcmRvdXIncyB0ZW1wbyBtYXAuCl1dCn0KCi0tIENvcHlyaWdodCAoYykgMjAyMyBBbGJlcnQgR3LDpGYsIE1JVCBMaWNlbnNlCgotLSBUaGUgYXJwZWdnaWF0b3IgdGFrZXMgbm90ZSBpbnB1dCBhbmQgY29uc3RydWN0cyBhIG5ldyBjeWNsaWMgcGF0dGVybiBlYWNoCi0tIHRpbWUgdGhlIGlucHV0IGNob3JkIGNoYW5nZXMuIE5vdGVzIGZyb20gdGhlIHBhdHRlcm4gYXJlIHRyaWdnZXJlZCBhdCBlYWNoCi0tIGJlYXQgYXMgdHJhbnNwb3J0IGlzIHJvbGxpbmcuIFRoZSBwbHVnaW4gYWRqdXN0cyB0byB0aGUgY3VycmVudCB0aW1lCi0tIHNpZ25hdHVyZSwgYW5kIGFsc28gbGV0cyB5b3Ugc3ViZGl2aWRlIHRoZSBiYXNlIHB1bHNlIG9mIHRoZSBtZXRlciB3aXRoIGEKLS0gY29udHJvbCBwYXJhbWV0ZXIgaW4gdGhlIHNldHVwLiBOb3RlIHZlbG9jaXRpZXMgZm9yIHRoZSBkaWZmZXJlbnQgbGV2ZWxzCi0tIGNhbiBiZSBhZGp1c3RlZCBpbiB0aGUgc2V0dXAgYXMgd2VsbC4KCi0tIE5PVEU6IFRoZSBzY2hlbWUgZm9yIHZhcnlpbmcgbm90ZSB2ZWxvY2l0aWVzIGluIG9yZGVyIHRvIGNyZWF0ZSByaHl0aG1pYwotLSBhY2NlbnRzIGlzIGEgYml0IG9uIHRoZSBzaW1wbGlzdGljIHNpZGUgYW5kIG9ubHkgcHJvdmlkZXMgdGhyZWUgZGlzdGluY3QKLS0gdmVsb2NpdHkgbGV2ZWxzIChiYXIsIGJlYXQsIGFuZCBzdWJkaXZpc2lvbiBwdWxzZXMpLiBTZWUgYmFybG93X2FycC5sdWEgZm9yCi0tIGEgbW9yZSBzb3BoaXN0aWNhdGVkIGltcGxlbWVudGF0aW9uIHdoaWNoIHVzZXMgQmFybG93J3MgaW5kaXNwZW5zYWJpbGl0eQotLSBmb3JtdWxhLgoKLS0gVGhlIG9jdGF2ZSByYW5nZSBjYW4gYmUgYWRqdXN0ZWQgdXAgYW5kIGRvd24gaW4gdGhlIHNldHVwLCBub3RlcyBmcm9tIHRoZQotLSBpbnB1dCBjaG9yZCBhcmUgdGhlbiByZXBlYXRlZCBpbiB0aGUgbG93ZXIgYW5kL29yIHVwcGVyIG9jdGF2ZXMuIFRoZSB1c3VhbAotLSBwYXR0ZXJuIHR5cGVzIGFyZSBzdXBwb3J0ZWQgYW5kIGNhbiBiZSBzZWxlY3RlZCBpbiB0aGUgc2V0dXA6IHVwLCBkb3duLAotLSB1cC1kb3duIChleGNsdXNpdmUgYW5kIGluY2x1c2l2ZSBtb2RlcyksIG9yZGVyIChub3RlcyBhcmUgcGxheWVkIGluIHRoZQotLSBvcmRlciBpbiB3aGljaCB0aGV5IGFyZSBpbnB1dCksIGFuZCByYW5kb20uCgotLSBUaGUgbGVuZ3RoIG9mIHRoZSBub3RlcyBjYW4gYmUgc2V0IHVzaW5nIHRoZSBnYXRlIGNvbnRyb2wgYXMgYSBmcmFjdGlvbgotLSAoMC4uMSB2YWx1ZSkgb2YgdGhlIG5vdGUgZGl2aXNpb24uIFRoZSBzd2luZyBjb250cm9sIGxldHMgeW91IGRlbGF5IHRoZQotLSBvZmYtYmVhdCBub3RlcyBieSB2YXJ5aW5nIGFtb3VudHMsIGdpdmVuIGFzIGEgZnJhY3Rpb24gcmFuZ2luZyBmcm9tIDAuNSB0bwotLSAwLjc1OyBhIHZhbHVlIG9mIDAuNSBwcm9kdWNlcyBhIHN0cmFpZ2h0IHJoeXRobSAobm8gc3dpbmcpLCAwLjY3IGEgdHJpcGxldAotLSBmZWVsLgoKLS0gQSB0b2dnbGUgaW4gdGhlIHNldHVwIGxldHMgeW91IGVuYWJsZSBsYXRjaCBtb2RlLCBpbiB3aGljaCB0aGUgY3VycmVudAotLSBwYXR0ZXJuIGtlZXBzIHBsYXlpbmcgaWYgeW91IHJlbGVhc2UgYWxsIGtleXMsIHVudGlsIHlvdSBzdGFydCBhIG5ldwotLSBjaG9yZC4gQW5vdGhlciB0b2dnbGUgZW5hYmxlcyBzeW5jIG1vZGUsIGluIHdoaWNoIHRoZSBwYXR0ZXJuIGlzIHByb3Blcmx5Ci0tIHN5bmNocm9uaXplZCB0byBiYXJzIGFuZCBiZWF0cywgbm8gbWF0dGVyIHdoZXJlIHlvdSBjaGFuZ2UgY2hvcmRzLiBUaGlzCi0tIGFsc28gd29ya3Mgd2l0aCBwYXR0ZXJucyBzcGFubmluZyBtdWx0aXBsZSBiYXJzLCBhbmQgb2Z0ZW4gY3JlYXRlcyBhIG11Y2gKLS0gc21vb3RoZXIgYXJwZWdnaW8gdGhhbiBqdXN0IGN5Y2xpbmcgdGhyb3VnaCB0aGUgcGF0dGVybiAod2hpY2ggaXMgdGhlCi0tIGRlZmF1bHQpLiBCb3RoIGxhdGNoIGFuZCBzeW5jIG1vZGUgYXJlIGVzcGVjaWFsbHkgaGVscGZ1bCBmb3IgaW1wcmVjaXNlCi0tIHBsYXllcnMgKGxpa2UgbWUpIHdobyB0ZW5kIHRvIG1pc3MgYmVhdHMgaW4gY2hvcmQgY2hhbmdlcy4KCi0tIFRoZSBieXBhc3MgdG9nZ2xlLCB3aGVuIGVuZ2FnZWQsIHN1c3BlbmRzIGFycGVnZ2lhdG9yIHBsYXliYWNrIGFuZCBzZW5kcwotLSB0aHJvdWdoIHRoZSBpbnB1dCBub3RlcyBhcyB0aGV5IGFyZS4gVGhpcyBpcyBpbnRlbmRlZCB0byBtb25pdG9yIHRoZSBpbnB1dAotLSBnb2luZyBpbnRvIHRoZSBhcnBlZ2dpYXRvciwgYnV0IGNhbiBhbHNvIGJlIHVzZWQgYXMgYSBwZXJmb3JtYW5jZSB0b29sLgotLSAoRGlzYWJsaW5nIHRoZSBhcnBlZ2dpYXRvciBwbHVnaW4gaW4gQXJkb3VyIGhhcyBhIHNpbWlsYXIgZWZmZWN0LCBidXQKLS0gZG9lc24ndCBzaWxlbmNlIGV4aXN0aW5nIG5vdGVzLCB3aGljaCB0aGUgYnlwYXNzIHRvZ2dsZSBkb2VzLikKCi0tIEFsbCB0aGVzZSBwYXJhbWV0ZXJzIGFyZSBwbHVnaW4gY29udHJvbHMgd2hpY2ggY2FuIGJlIGF1dG9tYXRlZCBhbmQgc2F2ZWQKLS0gaW4gcHJlc2V0cy4gU29tZSBmYWN0b3J5IHByZXNldHMgYXJlIHByb3ZpZGVkIGFzIHdlbGwuCgotLSBMYXN0IGJ1dCBub3QgbGVhc3QsIHRoZSBwbHVnaW4gbGlzdGVucyBvbiBhbGwgTUlESSBjaGFubmVscywgYW5kIHRoZSBsYXN0Ci0tIE1JREkgY2hhbm5lbCB1c2VkIGluIHRoZSBpbnB1dCBhbHNvIHNldHMgdGhlIE1JREkgY2hhbm5lbCBmb3Igb3V0cHV0LiBUaGlzCi0tIGxldHMgeW91IHBsYXkgZHJ1bWtpdHMgd2hpY2ggZXhwZWN0IHRoZWlyIE1JREkgaW5wdXQgb24gYSBjZXJ0YWluIE1JREkKLS0gY2hhbm5lbCAodXN1YWxseSBjaGFubmVsIDEwKSwgd2l0aG91dCBoYXZpbmcgdG8gZmlkZGxlIHdpdGggQXJkb3VyJ3MgTUlESQotLSB0cmFjayBwYXJhbWV0ZXJzLCBwcm92aWRlZCB0aGF0IHlvdXIgTUlESSBjb250cm9sbGVyIGNhbiBzZW5kIGRhdGEgb24gdGhlCi0tIGFwcHJvcHJpYXRlIE1JREkgY2hhbm5lbC4KCmZ1bmN0aW9uIGRzcF9pb2NvbmZpZyAoKQogICByZXR1cm4geyB7IG1pZGlfaW4gPSAxLCBtaWRpX291dCA9IDEsIGF1ZGlvX2luID0gLTEsIGF1ZGlvX291dCA9IC0xfSwgfQplbmQKCmZ1bmN0aW9uIGRzcF9vcHRpb25zICgpCiAgIHJldHVybiB7IHRpbWVfaW5mbyA9IHRydWUsIHJlZ3VsYXJfYmxvY2tfbGVuZ3RoID0gdHJ1ZSB9CmVuZAoKZnVuY3Rpb24gZHNwX3BhcmFtcyAoKQogICByZXR1cm4KICAgICAgewoJIHsgdHlwZSA9ICJpbnB1dCIsIG5hbWUgPSAiRGl2aXNpb24iLCBtaW4gPSAxLCBtYXggPSAxNiwgZGVmYXVsdCA9IDEsIGludGVnZXIgPSB0cnVlLCBkb2MgPSAibnVtYmVyIG9mIHN1YmRpdmlzaW9ucyBvZiB0aGUgYmVhdCIgfSwKCSB7IHR5cGUgPSAiaW5wdXQiLCBuYW1lID0gIk9jdGF2ZSB1cCIsIG1pbiA9IDAsIG1heCA9IDUsIGRlZmF1bHQgPSAwLCBpbnRlZ2VyID0gdHJ1ZSwgZG9jID0gIm9jdGF2ZSByYW5nZSB1cCIgfSwKCSB7IHR5cGUgPSAiaW5wdXQiLCBuYW1lID0gIk9jdGF2ZSBkb3duIiwgbWluID0gMCwgbWF4ID0gNSwgZGVmYXVsdCA9IDAsIGludGVnZXIgPSB0cnVlLCBkb2MgPSAib2N0YXZlIHJhbmdlIGRvd24iIH0sCgkgeyB0eXBlID0gImlucHV0IiwgbmFtZSA9ICJQYXR0ZXJuIiwgbWluID0gMSwgbWF4ID0gNiwgZGVmYXVsdCA9IDEsIGludGVnZXIgPSB0cnVlLCBkb2MgPSAicGF0dGVybiBzdHlsZSIsCgkgICBzY2FsZXBvaW50cyA9CgkgICAgICB7CVsiMSB1cCJdID0gMSwgWyIyIGRvd24iXSA9IDIsIFsiMyBleGNsdXNpdmUiXSA9IDMsIFsiNCBpbmNsdXNpdmUiXSA9IDQsIFsiNSBvcmRlciJdID0gNSwgWyI2IHJhbmRvbSJdID0gNiB9IH0sCgkgeyB0eXBlID0gImlucHV0IiwgbmFtZSA9ICJWZWxvY2l0eSAxIiwgbWluID0gMCwgbWF4ID0gMTI3LCBkZWZhdWx0ID0gMTAwLCBpbnRlZ2VyID0gdHJ1ZSwgZG9jID0gInZlbG9jaXR5IGxldmVsIChiYXIpIiB9LAoJIHsgdHlwZSA9ICJpbnB1dCIsIG5hbWUgPSAiVmVsb2NpdHkgMiIsIG1pbiA9IDAsIG1heCA9IDEyNywgZGVmYXVsdCA9IDgwLCBpbnRlZ2VyID0gdHJ1ZSwgZG9jID0gInZlbG9jaXR5IGxldmVsIChiZWF0KSIgfSwKCSB7IHR5cGUgPSAiaW5wdXQiLCBuYW1lID0gIlZlbG9jaXR5IDMiLCBtaW4gPSAwLCBtYXggPSAxMjcsIGRlZmF1bHQgPSA2MCwgaW50ZWdlciA9IHRydWUsIGRvYyA9ICJ2ZWxvY2l0eSBsZXZlbCAoc3ViZGl2aXNpb24pIiB9LAoJIHsgdHlwZSA9ICJpbnB1dCIsIG5hbWUgPSAiTGF0Y2giLCBtaW4gPSAwLCBtYXggPSAxLCBkZWZhdWx0ID0gMCwgdG9nZ2xlZCA9IHRydWUsIGRvYyA9ICJ0b2dnbGUgbGF0Y2ggbW9kZSIgfSwKCSB7IHR5cGUgPSAiaW5wdXQiLCBuYW1lID0gIlN5bmMiLCBtaW4gPSAwLCBtYXggPSAxLCBkZWZhdWx0ID0gMCwgdG9nZ2xlZCA9IHRydWUsIGRvYyA9ICJ0b2dnbGUgc3luYyBtb2RlIiB9LAoJIHsgdHlwZSA9ICJpbnB1dCIsIG5hbWUgPSAiQnlwYXNzIiwgbWluID0gMCwgbWF4ID0gMSwgZGVmYXVsdCA9IDAsIHRvZ2dsZWQgPSB0cnVlLCBkb2MgPSAiYnlwYXNzIHRoZSBhcnBlZ2dpYXRvciwgcGFzcyB0aHJvdWdoIGlucHV0IG5vdGVzIiB9LAoJIHsgdHlwZSA9ICJpbnB1dCIsIG5hbWUgPSAiR2F0ZSIsIG1pbiA9IDAsIG1heCA9IDEsIGRlZmF1bHQgPSAxLCBkb2MgPSAiZ2F0ZSBhcyBmcmFjdGlvbiBvZiBwdWxzZSBsZW5ndGgiLCBzY2FsZXBvaW50cyA9IHsgbGVnYXRvID0gMCB9IH0sCgkgeyB0eXBlID0gImlucHV0IiwgbmFtZSA9ICJTd2luZyIsIG1pbiA9IDAuNSwgbWF4ID0gMC43NSwgZGVmYXVsdCA9IDAuNSwgZG9jID0gInN3aW5nIGZhY3RvciAoMC42NyA9IHRyaXBsZXQgZmVlbCkiIH0sCiAgICAgIH0KZW5kCgpmdW5jdGlvbiBwcmVzZXRzKCkKICAgLS0ganVzdCBhIGZldyBiYXNpYyBleGFtcGxlcyBmb3Igbm93LCB3ZSdsbCBhZGQgbW9yZSBzdHVmZiBoZXJlIGxhdGVyCiAgIHJldHVybgogICAgICB7CgkgeyBuYW1lID0gIjAgZGVmYXVsdCIsIHBhcmFtcyA9IHsgRGl2aXNpb24gPSAxLCBbIk9jdGF2ZSB1cCJdID0gMCwgWyJPY3RhdmUgZG93biJdID0gMCwgUGF0dGVybiA9IDEsIFsiVmVsb2NpdHkgMSJdID0gMTAwLCBbIlZlbG9jaXR5IDIiXSA9IDgwLCBbIlZlbG9jaXR5IDMiXSA9IDYwLCBMYXRjaCA9IDAsIFN5bmMgPSAwLCBTd2luZyA9IDAuNSwgR2F0ZSA9IDEgfSB9LAoJIHsgbmFtZSA9ICIxIGxhdGNoIiwgcGFyYW1zID0geyBMYXRjaCA9IDEsIFN5bmMgPSAwIH0gfSwKCSB7IG5hbWUgPSAiMiBsYXRjaCBhbmQgc3luYyIsIHBhcmFtcyA9IHsgTGF0Y2ggPSAxLCBTeW5jID0gMSB9IH0sCgkgeyBuYW1lID0gIjMgYmFzcyIsIHBhcmFtcyA9IHsgRGl2aXNpb24gPSAxLCBbIk9jdGF2ZSB1cCJdID0gMCwgWyJPY3RhdmUgZG93biJdID0gMSwgUGF0dGVybiA9IDEsIFN3aW5nID0gMC41LCBHYXRlID0gMSB9IH0sCgkgeyBuYW1lID0gIjQgc3dpbmcgNjAlICMxIC0gc3ludGgiLCBwYXJhbXMgPSB7IERpdmlzaW9uID0gMiwgWyJPY3RhdmUgdXAiXSA9IDEsIFsiT2N0YXZlIGRvd24iXSA9IDEsIFBhdHRlcm4gPSAzLCBTd2luZyA9IDAuNiwgR2F0ZSA9IDEgfSB9LAoJIHsgbmFtZSA9ICI1IHN3aW5nIDYwJSAjMiAtIGRydW1zIiwgcGFyYW1zID0geyBEaXZpc2lvbiA9IDIsIFsiT2N0YXZlIHVwIl0gPSAwLCBbIk9jdGF2ZSBkb3duIl0gPSAwLCBQYXR0ZXJuID0gMSwgU3dpbmcgPSAwLjYsIEdhdGUgPSAxIH0gfSwKCSB7IG5hbWUgPSAiNiBzd2luZyA2NiUgIzEgLSBzeW50aCIsIHBhcmFtcyA9IHsgRGl2aXNpb24gPSAyLCBbIk9jdGF2ZSB1cCJdID0gMSwgWyJPY3RhdmUgZG93biJdID0gMSwgUGF0dGVybiA9IDMsIFN3aW5nID0gMC42NiwgR2F0ZSA9IDEgfSB9LAoJIHsgbmFtZSA9ICI3IHN3aW5nIDY2JSAjMiAtIGRydW1zIiwgcGFyYW1zID0geyBEaXZpc2lvbiA9IDIsIFsiT2N0YXZlIHVwIl0gPSAwLCBbIk9jdGF2ZSBkb3duIl0gPSAwLCBQYXR0ZXJuID0gMSwgU3dpbmcgPSAwLjY2LCBHYXRlID0gMSB9IH0sCiAgICAgIH0KZW5kCgotLSBkZWJ1ZyBsZXZlbCAoMTogcHJpbnQgYmVhdCBpbmZvcm1hdGlvbiBpbiB0aGUgbG9nIHdpbmRvdywgMjogYWxzbyBwcmludCB0aGUKLS0gY3VycmVudCBwYXR0ZXJuIHdoZW5ldmVyIGl0IGNoYW5nZXMsIDM6IGFsc28gcHJpbnQgbm90ZSBpbmZvcm1hdGlvbiwgNDoKLS0gcHJpbnQgZXZlcnl0aGluZykKbG9jYWwgZGVidWcgPSAwCgpsb2NhbCBjaGFuID0gMCAtLSBNSURJIG91dHB1dCBjaGFubmVsCmxvY2FsIGxhc3Rfcm9sbGluZyAtLSBsYXN0IHRyYW5zcG9ydCBzdGF0dXMsIHRvIGRldGVjdCBjaGFuZ2VzCmxvY2FsIGxhc3RfYmVhdCwgbGFzdF90aW1lIC0tIGxhc3QgYmVhdCBudW1iZXIgYW5kIHNhbXBsZSB0aW1lCmxvY2FsIGxhc3RfbnVtIC0tIGxhc3Qgbm90ZQpsb2NhbCBsYXN0X2NoYW4gLS0gTUlESSBjaGFubmVsIG9mIGxhc3Qgbm90ZQpsb2NhbCBsYXN0X2dhdGUgLS0gb2ZmIHRpbWUgb2YgbGFzdCBub3RlCmxvY2FsIHN3aW5nX3RpbWUgLS0gc2FtcGxlIHRpbWUgb2YgZGVsYXllZCBwdWxzZSAoc3dpbmcpCmxvY2FsIGxhc3RfdXAsIGxhc3RfZG93biwgbGFzdF9tb2RlLCBsYXN0X3N5bmMsIGxhc3RfYnlwYXNzIC0tIHByZXZpb3VzIHBhcmFtcywgdG8gZGV0ZWN0IGNoYW5nZXMKbG9jYWwgY2hvcmQgPSB7fSAtLSBjdXJyZW50IGNob3JkIChub3RlIHN0b3JlKQpsb2NhbCBjaG9yZF9pbmRleCA9IDAgLS0gaW5kZXggb2YgbGFzdCBjaG9yZCBub3RlICgwIGlmIG5vbmUpCmxvY2FsIGxhdGNoZWQgPSB7fSAtLSBsYXRjaGVkIG5vdGVzCmxvY2FsIHBhdHRlcm4gPSB7fSAtLSBjdXJyZW50IHBhdHRlcm4KbG9jYWwgaW5kZXggPSAwIC0tIGN1cnJlbnQgcGF0dGVybiBpbmRleCAocmVzZXQgd2hlbiBwYXR0ZXJuIGNoYW5nZXMpCgpmdW5jdGlvbiBkc3BfcnVuIChfLCBfLCBuX3NhbXBsZXMpCiAgIGFzc2VydCAodHlwZShtaWRpb3V0KSA9PSAidGFibGUiKQogICBhc3NlcnQgKHR5cGUodGltZSkgPT0gInRhYmxlIikKICAgYXNzZXJ0ICh0eXBlKG1pZGlvdXQpID09ICJ0YWJsZSIpCgogICBsb2NhbCBjdHJsID0gQ3RybFBvcnRzOmFycmF5ICgpCiAgIC0tIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgdGhlc2UgYXJlIGludGVnZXIgdmFsdWVzLiAoVGhlIEdVSSBlbmZvcmNlcwogICAtLSB0aGlzLCBidXQgZnJhY3Rpb25hbCB2YWx1ZXMgbWF5IG9jY3VyIHRocm91Z2ggYXV0b21hdGlvbi4pCiAgIGxvY2FsIHN1YmRpdiwgdXAsIGRvd24sIG1vZGUgPSBtYXRoLmZsb29yKGN0cmxbMV0pLCBtYXRoLmZsb29yKGN0cmxbMl0pLCBtYXRoLmZsb29yKGN0cmxbM10pLCBtYXRoLmZsb29yKGN0cmxbNF0pCiAgIGxvY2FsIHZlbDEsIHZlbDIsIHZlbDMgPSBtYXRoLmZsb29yKGN0cmxbNV0pLCBtYXRoLmZsb29yKGN0cmxbNl0pLCBtYXRoLmZsb29yKGN0cmxbN10pCiAgIGxvY2FsIGxhdGNoID0gY3RybFs4XSA+IDAKICAgbG9jYWwgc3luYyA9IGN0cmxbOV0gPiAwCiAgIGxvY2FsIGJ5cGFzcyA9IGN0cmxbMTBdID4gMAogICBsb2NhbCBnYXRlID0gY3RybFsxMV0KICAgLS0gSXQgc2VlbXMgY3VzdG9tYXJ5IHRvIHNwZWNpZnkgc3dpbmcgdXNpbmcgYSBwZXJjZW50YWdlIChvciBmcmFjdGlvbikKICAgLS0gd2hlcmUgNTAlID0gMS8yIGRlbm90ZXMgYSBzdHJhaWdodCByaHl0aG0gKG5vIHN3aW5nKSBhbmQgNjclID0gMi8zIGEKICAgLS0gdHJpcGxldCBmZWVsLiBIZXJlIHdlIHRyYW5zbGF0ZSB0aGlzIHRvIGEgc3dpbmcgZmFjdG9yIHdoaWNoIGlzCiAgIC0tIG11bHRpcGxpZWQgd2l0aCB0aGUgbm90ZSBkaXZpc2lvbiB0aW1lIHRvIGdpdmUgdGhlIHRpbWluZyBvZiB0aGUKICAgLS0gb2ZmLWJlYXQgbm90ZXMuCiAgIGxvY2FsIHN3aW5nID0gMSsyKihjdHJsWzEyXS0wLjUpCiAgIC0tIHJvbGxpbmcgc3RhdGU6IEl0IHNlZW1zIHRoYXQgd2UgbmVlZCB0byBjaGVjayB0aGUgdHJhbnNwb3J0IHN0YXRlIChhcwogICAtLSBnaXZlbiBieSBBcmRvdXIncyAidHJhbnNwb3J0IGZpbml0ZSBzdGF0ZSBtYWNoaW5lIiA9IFRGU00pIGhlcmUsIGV2ZW4gaWYKICAgLS0gdGhlIHRyYW5zcG9ydCBpcyBub3QgYWN0dWFsbHkgbW92aW5nIHlldC4gT3RoZXJ3aXNlIHNvbWUgaW5wdXQgbm90ZXMgbWF5CiAgIC0tIGVycm9ybmVvdXNseSBzbGlwIHRocm91Z2ggYmVmb3JlIHBsYXliYWNrIHJlYWxseSBzdGFydHMuCiAgIGxvY2FsIHJvbGxpbmcgPSBTZXNzaW9uOnRyYW5zcG9ydF9zdGF0ZV9yb2xsaW5nICgpCiAgIGxvY2FsIGNoYW5nZWQgPSBmYWxzZQoKICAgaWYgdXAgfj0gbGFzdF91cCBvciBkb3duIH49IGxhc3RfZG93biBvciBtb2RlIH49IGxhc3RfbW9kZSB0aGVuCiAgICAgIGxhc3RfdXAgPSB1cAogICAgICBsYXN0X2Rvd24gPSBkb3duCiAgICAgIGxhc3RfbW9kZSA9IG1vZGUKICAgICAgY2hhbmdlZCA9IHRydWUKICAgZW5kCgogICBpZiBzeW5jIH49IGxhc3Rfc3luYyB0aGVuCiAgICAgIGxhc3Rfc3luYyA9IHN5bmMKICAgICAgaW5kZXggPSAwCiAgIGVuZAoKICAgaWYgbm90IGxhdGNoIGFuZCBuZXh0KGxhdGNoZWQpIH49IG5pbCB0aGVuCiAgICAgIGxhdGNoZWQgPSB7fQogICAgICBjaGFuZ2VkID0gdHJ1ZQogICBlbmQKCiAgIGlmIHN3aW5nID09IDEgdGhlbgogICAgICBzd2luZ190aW1lID0gbmlsCiAgIGVuZAoKICAgbG9jYWwgYWxsX25vdGVzX29mZiA9IGZhbHNlCiAgIGlmIGJ5cGFzcyB+PSBsYXN0X2J5cGFzcyB0aGVuCiAgICAgIGxhc3RfYnlwYXNzID0gYnlwYXNzCiAgICAgIGFsbF9ub3Rlc19vZmYgPSB0cnVlCiAgIGVuZAoKICAgaWYgbGFzdF9yb2xsaW5nIH49IHJvbGxpbmcgdGhlbgogICAgICBsYXN0X3JvbGxpbmcgPSByb2xsaW5nCiAgICAgIC0tIHRyYW5zcG9ydCBjaGFuZ2UsIHNlbmQgYWxsLW5vdGVzIG9mZiAod2Ugb25seSBkbyB0aGlzIHdoZW4gdHJhbnNwb3J0CiAgICAgIC0tIHN0YXJ0cyByb2xsaW5nLCB0byBzaWxlbmNlIGFueSBub3RlcyB0aGF0IG1heSBoYXZlIGJlZW4gcGFzc2VkCiAgICAgIC0tIHRocm91Z2ggYmVmb3JlaGFuZDsgbm90ZSB0aGF0IEFyZG91ciBhdXRvbWF0aWNhbGx5IHNlbmRzCiAgICAgIC0tIGFsbC1ub3Rlcy1vZmYgdG8gYWxsIE1JREkgY2hhbm5lbHMgYW55d2F5IHdoZW4gdHJhbnNwb3J0IGlzIHN0b3BwZWQpCiAgICAgIGlmIHJvbGxpbmcgdGhlbgoJIGFsbF9ub3Rlc19vZmYgPSB0cnVlCiAgICAgIGVuZAogICAgICBzd2luZ190aW1lID0gbmlsCiAgIGVuZAoKICAgbG9jYWwgayA9IDEKICAgaWYgYWxsX25vdGVzX29mZiB0aGVuCiAgICAgIC0tcHJpbnQoImFsbC1ub3Rlcy1vZmYiLCBjaGFuKQogICAgICBtaWRpb3V0W2tdID0geyB0aW1lID0gMSwgZGF0YSA9IHsgMHhiMCtjaGFuLCAxMjMsIDAgfSB9CiAgICAgIGsgPSBrKzEKICAgZW5kCgogICBmb3IgXyxldiBpbiBpcGFpcnMgKG1pZGlpbikgZG8KICAgICAgbG9jYWwgc3RhdHVzLCBudW0sIHZhbCA9IHRhYmxlLnVucGFjayhldi5kYXRhKQogICAgICBsb2NhbCBjaCA9IHN0YXR1cyAmIDB4ZgogICAgICBzdGF0dXMgPSBzdGF0dXMgJiAweGYwCiAgICAgIGlmIG5vdCByb2xsaW5nIG9yIGJ5cGFzcyB0aGVuCgkgLS0gYXJwZWdnaWF0b3IgaXMganVzdCBsaXN0ZW5pbmcsIHBhc3MgdGhyb3VnaCBhbGwgTUlESSBkYXRhCgkgbWlkaW91dFtrXSA9IGV2CgkgayA9IGsrMQogICAgICBlbHNlaWYgc3RhdHVzID49IDB4YjAgdGhlbgoJIC0tIGFycGVnZ2lhdG9yIGlzIHBsYXlpbmcsIHBhc3MgdGhyb3VnaCBhbGwgTUlESSBkYXRhIHRoYXQncyBub3QKCSAtLSBub3RlLXJlbGF0ZWQsIGkuZS4sIGNvbnRyb2wgY2hhbmdlLCBwcm9ncmFtIGNoYW5nZSwgY2hhbm5lbAoJIC0tIHByZXNzdXJlLCBwaXRjaCB3aGVlbCwgYW5kIHN5c3RlbSBtZXNzYWdlcwoJIG1pZGlvdXRba10gPSBldgoJIGsgPSBrKzEKICAgICAgZW5kCiAgICAgIGlmIHN0YXR1cyA9PSAweDgwIG9yIHN0YXR1cyA9PSAweDkwIGFuZCB2YWwgPT0gMCB0aGVuCgkgaWYgZGVidWcgPj0gNCB0aGVuCgkgICAgcHJpbnQoIm5vdGUgb2ZmIiwgbnVtLCB2YWwpCgkgZW5kCgkgLS0ga2VlcCB0cmFjayBvZiBsYXRjaGVkIG5vdGVzCgkgaWYgbGF0Y2ggdGhlbgoJICAgIGxhdGNoZWRbbnVtXSA9IGNob3JkW251bV0KCSBlbHNlCgkgICAgY2hhbmdlZCA9IHRydWUKCSBlbmQKCSBjaG9yZFtudW1dID0gbmlsCiAgICAgIGVsc2VpZiBzdGF0dXMgPT0gMHg5MCB0aGVuCgkgaWYgZGVidWcgPj0gNCB0aGVuCgkgICAgcHJpbnQoIm5vdGUgb24iLCBudW0sIHZhbCwgImNoIiwgY2gpCgkgZW5kCgkgaWYgbGF0Y2ggYW5kIG5leHQoY2hvcmQpID09IG5pbCB0aGVuCgkgICAgLS0gbmV3IHBhdHRlcm4sIGdldCByaWQgb2YgbGF0Y2hlZCBub3RlcwoJICAgIGxhdGNoZWQgPSB7fQoJIGVuZAoJIGNob3JkX2luZGV4ID0gY2hvcmRfaW5kZXgrMQoJIGNob3JkW251bV0gPSBjaG9yZF9pbmRleAoJIGlmIGxhdGNoIGFuZCBsYXRjaGVkW251bV0gdGhlbgoJICAgIC0tIGF2b2lkIGRvdWJsZSBub3RlcyBpbiBsYXRjaCBtb2RlCgkgICAgbGF0Y2hlZFtudW1dID0gbmlsCgkgZWxzZQoJICAgIGNoYW5nZWQgPSB0cnVlCgkgZW5kCgkgY2hhbiA9IGNoCiAgICAgIGVsc2VpZiBzdGF0dXMgPT0gMHhiMCBhbmQgbnVtID09IDEyMyBhbmQgY2ggPT0gY2hhbiB0aGVuCgkgaWYgZGVidWcgPj0gNCB0aGVuCgkgICAgcHJpbnQoImFsbCBub3RlcyBvZmYiKQoJIGVuZAoJIGNob3JkID0ge30KCSBsYXRjaGVkID0ge30KCSBjaGFuZ2VkID0gdHJ1ZQogICAgICBlbmQKICAgZW5kCiAgIGlmIGNoYW5nZWQgdGhlbgogICAgICAtLSB1cGRhdGUgdGhlIHBhdHRlcm4KICAgICAgcGF0dGVybiA9IHt9CiAgICAgIGZ1bmN0aW9uIHBhdHRlcm5fZnJvbV9jaG9yZChwYXR0ZXJuLCBjaG9yZCkKCSBmb3IgbnVtLCB2YWwgaW4gcGFpcnMoY2hvcmQpIGRvCgkgICAgdGFibGUuaW5zZXJ0KHBhdHRlcm4sIG51bSkKCSAgICBmb3IgaSA9IDEsIGRvd24gZG8KCSAgICAgICBpZiBudW0taSoxMiA+PSAwIHRoZW4KCQkgIHRhYmxlLmluc2VydChwYXR0ZXJuLCBudW0taSoxMikKCSAgICAgICBlbmQKCSAgICBlbmQKCSAgICBmb3IgaSA9IDEsIHVwIGRvCgkgICAgICAgaWYgbnVtK2kqMTIgPD0gMTI3IHRoZW4KCQkgIHRhYmxlLmluc2VydChwYXR0ZXJuLCBudW0raSoxMikKCSAgICAgICBlbmQKCSAgICBlbmQKCSBlbmQKICAgICAgZW5kCiAgICAgIHBhdHRlcm5fZnJvbV9jaG9yZChwYXR0ZXJuLCBjaG9yZCkKICAgICAgaWYgbGF0Y2ggdGhlbgoJIC0tIGFkZCBhbnkgbGF0Y2hlZCBub3RlcwoJIHBhdHRlcm5fZnJvbV9jaG9yZChwYXR0ZXJuLCBsYXRjaGVkKQogICAgICBlbmQKICAgICAgdGFibGUuc29ydChwYXR0ZXJuKSAtLSBvcmRlciBieSBhc2NlbmRpbmcgbm90ZXMgKHVwIHBhdHRlcm4pCiAgICAgIGxvY2FsIG4gPSAjcGF0dGVybgogICAgICBpZiBuID4gMCB0aGVuCgkgaWYgbW9kZSA9PSAyIHRoZW4KCSAgICAtLSBkb3duIHBhdHRlcm4sIHJldmVyc2UgdGhlIGxpc3QKCSAgICB0YWJsZS5zb3J0KHBhdHRlcm4sIGZ1bmN0aW9uKGEsYikgcmV0dXJuIGEgPiBiIGVuZCkKCSBlbHNlaWYgbW9kZSA9PSAzIHRoZW4KCSAgICAtLSBhZGQgdGhlIHJldmVyc2FsIG9mIHRoZSBsaXN0IGV4Y2x1ZGluZyB0aGUgbGFzdCBlbGVtZW50CgkgICAgZm9yIGkgPSAxLCBuLTIgZG8KCSAgICAgICB0YWJsZS5pbnNlcnQocGF0dGVybiwgcGF0dGVybltuLWldKQoJICAgIGVuZAoJIGVsc2VpZiBtb2RlID09IDQgdGhlbgoJICAgIC0tIGFkZCB0aGUgcmV2ZXJzYWwgb2YgdGhlIGxpc3QgaW5jbHVkaW5nIHRoZSBsYXN0IGVsZW1lbnQKCSAgICBmb3IgaSA9IDEsIG4tMSBkbwoJICAgICAgIHRhYmxlLmluc2VydChwYXR0ZXJuLCBwYXR0ZXJuW24taSsxXSkKCSAgICBlbmQKCSBlbHNlaWYgbW9kZSA9PSA1IHRoZW4KCSAgICAtLSBvcmRlciB0aGUgcGF0dGVybiBieSBjaG9yZCBpbmRpY2VzCgkgICAgbG9jYWwgayA9IGNob3JkX2luZGV4KzEKCSAgICBsb2NhbCBpZHggPSB7fQoJICAgIC0tIGJ1aWxkIGEgdGFibGUgb2YgaW5kaWNlcyB3aGljaCBhbHNvIGluY2x1ZGVzIG9jdGF2ZXMgdXAgYW5kCgkgICAgLS0gZG93biwgb3JkZXJpbmcgdGhlbSBmaXJzdCBieSBvY3RhdmUgYW5kIHRoZW4gYnkgaW5kZXgKCSAgICBmdW5jdGlvbiBpbmRleF9mcm9tX2Nob3JkKGlkeCwgY2hvcmQpCgkgICAgICAgZm9yIG51bSwgdmFsIGluIHBhaXJzKGNob3JkKSBkbwoJCSAgZm9yIGkgPSAxLCBkb3duIGRvCgkJICAgICBpZiBudW0taSoxMiA+PSAwIHRoZW4KCQkJaWR4W251bS1pKjEyXSA9IHZhbCAtIGkqawoJCSAgICAgZW5kCgkJICBlbmQKCQkgIGlkeFtudW1dID0gdmFsCgkJICBmb3IgaSA9IDEsIHVwIGRvCgkJICAgICBpZiBudW0raSoxMiA8PSAxMjcgdGhlbgoJCQlpZHhbbnVtK2kqMTJdID0gdmFsICsgaSprCgkJICAgICBlbmQKCQkgIGVuZAoJICAgICAgIGVuZAoJICAgIGVuZAoJICAgIGluZGV4X2Zyb21fY2hvcmQoaWR4LCBjaG9yZCkKCSAgICBpZiBsYXRjaCB0aGVuCgkgICAgICAgaW5kZXhfZnJvbV9jaG9yZChpZHgsIGxhdGNoZWQpCgkgICAgZW5kCgkgICAgdGFibGUuc29ydChwYXR0ZXJuLCBmdW5jdGlvbihhLGIpIHJldHVybiBpZHhbYV0gPCBpZHhbYl0gZW5kKQoJIGVsc2VpZiBtb2RlID09IDYgdGhlbgoJICAgIC0tIHJhbmRvbSBvcmRlcgoJICAgIGZvciBpID0gbiwgMiwgLTEgZG8KCSAgICAgICBsb2NhbCBqID0gbWF0aC5yYW5kb20oaSkKCSAgICAgICBwYXR0ZXJuW2ldLCBwYXR0ZXJuW2pdID0gcGF0dGVybltqXSwgcGF0dGVybltpXQoJICAgIGVuZAoJIGVuZAoJIGlmIGRlYnVnID49IDIgdGhlbgoJICAgIGxvY2FsIHMgPSAicGF0dGVybjoiCgkgICAgZm9yIGksIG51bSBpbiBpcGFpcnMocGF0dGVybikgZG8KCSAgICAgICBzID0gcyAuLiAiICIgLi4gbnVtCgkgICAgZW5kCgkgICAgcHJpbnQocykKCSBlbmQKCSBpbmRleCA9IDAgLS0gcmVzZXQgcGF0dGVybiB0byB0aGUgc3RhcnQKICAgICAgZWxzZQoJIGNob3JkX2luZGV4ID0gMCAtLSBwYXR0ZXJuIGlzIGVtcHR5LCByZXNldCB0aGUgY2hvcmQgaW5kZXgKCSBpZiBkZWJ1ZyA+PSAyIHRoZW4KCSAgICBwcmludCgicGF0dGVybjogPGVtcHR5PiIpCgkgZW5kCiAgICAgIGVuZAogICBlbmQKCiAgIGlmIHJvbGxpbmcgYW5kIG5vdCBieXBhc3MgdGhlbgogICAgICAtLSB0cmFuc3BvcnQgaXMgcm9sbGluZywgbm90IGJ5cGFzc2VkLCBzbyB0aGUgYXJwZWdnaWF0b3IgaXMgcGxheWluZwogICAgICBpZiBsYXN0X2dhdGUgYW5kIGxhc3RfbnVtIGFuZAoJIGxhc3RfZ2F0ZSA+PSB0aW1lLnNhbXBsZSBhbmQgbGFzdF9nYXRlIDwgdGltZS5zYW1wbGVfZW5kIHRoZW4KCSAtLSBHYXRlZCBub3RlcyBkb24ndCBub3JtYWxseSBmYWxsIG9uIGEgYmVhdCwgc28gd2UgZGV0ZWN0IHRoZW0KCSAtLSBoZXJlLiAoSWYgdGhlIGdhdGUgdGltZSBoYXNuJ3QgYmVlbiBzZXQgb3Igd2UgbWlzcyBpdCwgdGhlbiB0aGUKCSAtLSBub3RlLW9mZiB3aWxsIGJlIHRha2VuIGNhcmUgb2Ygd2hlbiB0aGUgbmV4dCBub3RlIGdldHMgdHJpZ2dlcmVkLAoJIC0tIHNlZSBiZWxvdy4pCgkgaWYgZGVidWcgPj0gMyB0aGVuCgkgICAgcHJpbnQoIm5vdGUgb2ZmIiwgbGFzdF9udW0pCgkgZW5kCgkgLS0gc2FtcGxlLWFjY3VyYXRlICJvZmYiIHRpbWUKCSBsb2NhbCB0cyA9IGxhc3RfZ2F0ZSAtIHRpbWUuc2FtcGxlICsgMQoJIG1pZGlvdXRba10gPSB7IHRpbWUgPSB0cywgZGF0YSA9IHsgMHg4MCtsYXN0X2NoYW4sIGxhc3RfbnVtLCAxMDAgfSB9CgkgbGFzdF9udW0gPSBuaWwKCSBrID0gaysxCiAgICAgIGVuZAogICAgICAtLSBDaGVjayB3aGV0aGVyIGEgYmVhdCBpcyBkdWUsIHNvIHRoYXQgd2UgdHJpZ2dlciB0aGUgbmV4dCBub3RlLiBXZQogICAgICAtLSB3YW50IHRvIGRvIHRoaXMgaW4gYSBzYW1wbGUtYWNjdXJhdGUgbWFubmVyIGluIG9yZGVyIHRvIGF2b2lkIGppdHRlciwKICAgICAgLS0gd2hpY2ggbWFrZXMgdGhpbmdzIGEgbGl0dGxlIGNvbXBsaWNhdGVkLiAgVGhlcmUgYXJlIHRocmVlIGNhc2VzIHRvCiAgICAgIC0tIGNvbnNpZGVyIGhlcmU6CiAgICAgIC0tICgxKSBUcmFuc3BvcnQganVzdCBzdGFydGVkIHJvbGxpbmcgb3IgdGhlIHBsYXloZWFkIG1vdmVkIGZvciBzb21lCiAgICAgIC0tIHJlYXNvbiwgaW4gd2hpY2ggY2FzZSB3ZSAqbXVzdCogb3V0cHV0IHRoZSBub3RlIGltbWVkaWF0ZWx5IGluIG9yZGVyCiAgICAgIC0tIHRvIG5vdCBtaXNzIGEgYmVhdCAoZXZlbiBpZiB3ZSdyZSBhIGJpdCBsYXRlKS4KICAgICAgLS0gKDIpIFRoZSBiZWF0IG9jY3VycyBleGFjdGx5IGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBwcm9jZXNzaW5nIGN5Y2xlLAogICAgICAtLSBzbyB3ZSBvdXRwdXQgdGhlIG5vdGUgaW1tZWRpYXRlbHkuCiAgICAgIC0tICgzKSBUaGUgYmVhdCBoYXBwZW5zIHNvbWUgdGltZSBkdXJpbmcgdGhlIGN5Y2xlLCBpbiB3aGljaCBjYXNlIHdlCiAgICAgIC0tIGNhbGN1bGF0ZSB0aGUgc2FtcGxlIGF0IHdoaWNoIHRoZSBub3RlIGlzIGR1ZS4KICAgICAgbG9jYWwgZGVub20gPSB0aW1lLnRzX2Rlbm9taW5hdG9yICogc3ViZGl2CiAgICAgIC0tIGJlYXQgbnVtYmVycyBhdCBzdGFydCBhbmQgZW5kLCBzY2FsZWQgYnkgYmFzZSBwdWxzZXMgYW5kIHN1YmRpdmlzaW9ucwogICAgICBsb2NhbCBiMSwgYjIgPSBkZW5vbS80KnRpbWUuYmVhdCwgZGVub20vNCp0aW1lLmJlYXRfZW5kCiAgICAgIC0tIGludGVncmFsIHBhcnQgb2YgdGhlc2UKICAgICAgbG9jYWwgYmYxLCBiZjIgPSBtYXRoLmZsb29yKGIxKSwgbWF0aC5mbG9vcihiMikKICAgICAgLS0gc2FtcGxlIHRpbWVzIGF0IHN0YXJ0IGFuZCBlbmQKICAgICAgbG9jYWwgczEsIHMyID0gdGltZS5zYW1wbGUsIHRpbWUuc2FtcGxlX2VuZAogICAgICAtLSBjdXJyZW50IChub21pbmFsLCBpLmUuLCB1bnNjYWxlZCkgYmVhdCBudW1iZXIsIGFuZCBpdHMgc2FtcGxlIHRpbWUKICAgICAgbG9jYWwgYnQsIHRzCiAgICAgIGlmIGxhc3RfdGltZSBhbmQgdGltZS5zYW1wbGUgPCBsYXN0X3RpbWUgdGhlbgoJIC0tIHdyYXAtYXJvdW5kIChwcm9iYWJseSBkdXJpbmcgYSBsb29wKQoJIHN3aW5nX3RpbWUgPSBuaWwKICAgICAgZW5kCiAgICAgIGlmIHN3aW5nX3RpbWUgYW5kIHN3aW5nX3RpbWUgPj0gdGltZS5zYW1wbGUgdGhlbgoJIGlmIHN3aW5nX3RpbWUgPCB0aW1lLnNhbXBsZV9lbmQgdGhlbgoJICAgIGJ0LCB0cyA9IHRpbWUuYmVhdCwgc3dpbmdfdGltZQoJIGVuZAogICAgICBlbHNlaWYgbGFzdF9iZWF0IH49IG1hdGguZmxvb3IodGltZS5iZWF0KSBvciBiZjEgPT0gYjEgdGhlbgoJIC0tIHN1ZGRlbiBqdW1wIGluIHRyYW5zcG9ydCA9PiBuZXh0IGJlYXQgaXMgZHVlIGltbWVkaWF0ZWx5CgkgYnQsIHRzID0gdGltZS5iZWF0LCB0aW1lLnNhbXBsZQogICAgICBlbHNlaWYgYmYyID4gYmYxIGFuZCBiZjIgfj0gYjIgdGhlbgoJIC0tIG5leHQgYmVhdCBpcyBkdWUgc29tZSB0aW1lIGluIHRoaXMgY3ljbGUgKHdlJ3JlIGFzc3VtaW5nIGNvbnRhbnQKCSAtLSB0ZW1wbyBoZXJlLCBoZW5jZSB0aGlzIG51bWJlciBtYXkgYmUgb2ZmIGluIGNhc2UgdGhlIHRlbXBvIGlzCgkgLS0gY2hhbmdpbmcgdmVyeSBxdWlja2x5IGR1cmluZyB0aGUgY3ljbGUgLS0gc28gZG9uJ3QgZG8gdGhhdCkKCSBsb2NhbCBkID0gbWF0aC5jZWlsKChiMi1iZjIpLyhiMi1iMSkqKHMyLXMxKSkKCSBhc3NlcnQoZCA+IDApCgkgYnQsIHRzID0gdGltZS5iZWF0X2VuZCwgdGltZS5zYW1wbGVfZW5kIC0gZAogICAgICBlbmQKICAgICAgaWYgdHMgdGhlbgoJIC0tIHNhdmUgdGhlIGxhc3Qgbm9taW5hbCBiZWF0IHNvIHRoYXQgd2UgY2FuIGRldGVjdCBzdWRkZW4gY2hhbmdlcyBvZgoJIC0tIHRoZSBwbGF5aGVhZCBsYXRlciAoZS5nLiwgd2hlbiB0cmFuc3BvcnQgc3RhcnRzIHJvbGxpbmcsIG9yIGF0IHRoZQoJIC0tIGVuZCBvZiBhIGxvb3Agd2hlbiB0aGUgcGxheWhlYWQgd3JhcHMgYXJvdW5kIHRvIHRoZSBiZWdpbm5pbmcpCgkgbGFzdF9iZWF0ID0gbWF0aC5mbG9vcihidCkKCSAtLSBzYW1lIGZvciBzYW1wbGUgdGltZSwgdG8gZGV0ZWN0IHdyYXAtYXJvdW5kCgkgbGFzdF90aW1lID0gdGltZS5zYW1wbGUKCSAtLSBnZXQgdGhlIHRlbXBvIG1hcCBpbmZvcm1hdGlvbgoJIGxvY2FsIHRtID0gVGVtcG9yYWwuVGVtcG9NYXAucmVhZCAoKQoJIGxvY2FsIHBvcyA9IFRlbXBvcmFsLnRpbWVwb3NfdCAodHMpCgkgbG9jYWwgYmJ0ID0gdG06YmJ0X2F0IChwb3MpCgkgbG9jYWwgbWV0ZXIgPSB0bTptZXRlcl9hdCAocG9zKQoJIGxvY2FsIHRlbXBvID0gdG06dGVtcG9fYXQgKHBvcykKCSAtLSBkdXJhdGlvbiBvZiB0aGlzIHN0ZXAKCSBsb2NhbCBkdXIgPSB0bTpiYnRfZHVyYXRpb25fYXQocG9zLCBUZW1wb3JhbC5CQlRfT2Zmc2V0KDAsMSwwKSk6c2FtcGxlcygpIC8gc3ViZGl2CgkgLS0gbmV4dCBub3RlIG9mZnNldCBpbiBzd2luZyBtb2RlCgkgbG9jYWwgc3dpbmdfZHVyID0gbWF0aC5mbG9vcihkdXIgKiBzd2luZykKCSBsb2NhbCBzd2luZ190cyA9IHRzICsgc3dpbmdfZHVyCgkgLS0gY2FsY3VsYXRlIHRoZSBub3RlLW9mZiB0aW1lIGluIHNhbXBsZXMsIHRoaXMgaXMgdXNlZCBpZiB0aGUgZ2F0ZQoJIC0tIGNvbnRyb2wgaXMgbmVpdGhlciAwIG5vciAxCgkgbG9jYWwgZ2F0ZV9kdXIgPSBtYXRoLmZsb29yKGR1ciAqIGdhdGUpCgkgLS0gYWRqdXN0IHRoZSBnYXRlIGR1cmF0aW9uIGZvciBzd2luZwoJIGlmIHN3aW5nID4gMSB0aGVuCgkgICAgaWYgc3dpbmdfdGltZSB0aGVuCgkgICAgICAgZ2F0ZV9kdXIgPSBnYXRlX2R1ciAtIG1hdGguZmxvb3IoZHVyICogKHN3aW5nLTEpICogZ2F0ZSkKCSAgICBlbHNlCgkgICAgICAgZ2F0ZV9kdXIgPSBnYXRlX2R1ciArIG1hdGguZmxvb3IoZHVyICogKHN3aW5nLTEpICogZ2F0ZSkKCSAgICBlbmQKCSBlbmQKCSBsb2NhbCBnYXRlX3RzID0gdHMgKyBnYXRlX2R1cgoJIGxvY2FsIG4gPSAjcGF0dGVybgoJIHRzID0gdHMgLSB0aW1lLnNhbXBsZSArIDEKCSBpZiBkZWJ1ZyA+PSAxIHRoZW4KCSAgICAtLSBwcmludCBzb21lIGRlYnVnZ2luZyBpbmZvcm1hdGlvbjogYmJ0LCBmcmFjdGlvbmFsIGJlYXQgbnVtYmVyLAoJICAgIC0tIHNhbXBsZSBvZmZzZXQsIGN1cnJlbnQgbWV0ZXIsIGN1cnJlbnQgdGVtcG8KCSAgICBwcmludCAoc3RyaW5nLmZvcm1hdCgiJXMgLSAlZyBbJWRdIC0gJWQvJWQgLSAlZyBicG0iLCBiYnQ6c3RyKCksCgkJCQkgbWF0aC5mbG9vcihkZW5vbSpidCkvZGVub20sIHRzLTEsCgkJCQkgbWV0ZXI6ZGl2aXNpb25zX3Blcl9iYXIoKSwgbWV0ZXI6bm90ZV92YWx1ZSgpLAoJCQkJIHRlbXBvOnF1YXJ0ZXJfbm90ZXNfcGVyX21pbnV0ZSgpKSkKCSBlbmQKCSBpZiBsYXN0X251bSB0aGVuCgkgICAgLS0ga2lsbCB0aGUgb2xkIG5vdGUKCSAgICBpZiBkZWJ1ZyA+PSAzIHRoZW4KCSAgICAgICBwcmludCgibm90ZSBvZmYiLCBsYXN0X251bSkKCSAgICBlbmQKCSAgICBtaWRpb3V0W2tdID0geyB0aW1lID0gdHMsIGRhdGEgPSB7IDB4ODArbGFzdF9jaGFuLCBsYXN0X251bSwgMTAwIH0gfQoJICAgIGxhc3RfbnVtID0gbmlsCgkgICAgayA9IGsrMQoJIGVuZAoJIGlmIG4gPiAwIHRoZW4KCSAgICAtLSBjYWxjdWxhdGUgYSBmcmFjdGlvbmFsIHB1bHNlIG51bWJlciBmcm9tIHRoZSBjdXJyZW50IGJidAoJICAgIGxvY2FsIHAgPSBiYnQuYmVhdHMtMSArIG1hdGgubWF4KDAsIGJidC50aWNrcykgLyBUZW1wb3JhbC50aWNrc19wZXJfYmVhdAoJICAgIC0tIENhbGN1bGF0ZSBhIGJhc2ljIHZlbG9jaXR5IHBhdHRlcm46IGJ5IGRlZmF1bHQsIDEwMCBmb3IgdGhlCgkgICAgLS0gZmlyc3QgYmVhdCBpbiBhIGJhciwgODAgZm9yIHRoZSBvdGhlciBub24tZnJhY3Rpb25hbCBiZWF0cywgNjAKCSAgICAtLSBmb3IgZXZlcnl0aGluZyBlbHNlIChzdWJkaXZpc2lvbiBwdWxzZXMpLiBUaGVzZSB2YWx1ZXMgY2FuIGJlCgkgICAgLS0gY2hhbmdlZCB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGNvbnRyb2wuIE5PVEU6IFRoZXJlIGFyZSBtdWNoCgkgICAgLS0gbW9yZSBzb3BoaXN0aWN0ZWQgd2F5cyB0byBkbyB0aGlzLCBidXQgd2UgdHJ5IHRvIGtlZXAgdGhpbmdzCgkgICAgLS0gc2ltcGxlIGhlcmUuCgkgICAgbG9jYWwgdiA9IHZlbDMKCSAgICBpZiBwID09IDAgdGhlbgoJICAgICAgIHYgPSB2ZWwxCgkgICAgZWxzZWlmIHAgPT0gbWF0aC5mbG9vcihwKSB0aGVuCgkgICAgICAgdiA9IHZlbDIKCSAgICBlbmQKCSAgICAtLXByaW50KCJwIiwgcCwgInYiLCB2KQoJICAgIC0tIHRyaWdnZXIgdGhlIG5ldyBub3RlCgkgICAgaWYgc3luYyB0aGVuCgkgICAgICAgLS0gc3luYyBwYXR0ZXJuIHRvIHRoZSBiYnQKCSAgICAgICBsb2NhbCBtZGl2ID0gbWV0ZXI6ZGl2aXNpb25zX3Blcl9iYXIoKQoJICAgICAgIGxvY2FsIG5wdWxzZXMgPSBtZGl2ICogc3ViZGl2CgkgICAgICAgbG9jYWwgbCA9ICNwYXR0ZXJuCgkgICAgICAgbG9jYWwgayA9IG1hdGguZmxvb3IocCpzdWJkaXYpIC0tIGN1cnJlbnQgaW5kZXggaW4gYmFyCgkgICAgICAgbG9jYWwgbiA9IG1hdGguZmxvb3IobC9ucHVsc2VzKSAtLSBiYXJzIGluIHBhdHRlcm4KCSAgICAgICBpZiBuID4gMCB0aGVuCgkJICBrID0gayArIGluZGV4Km5wdWxzZXMKCQkgIGlmIChrKzEpICUgbnB1bHNlcyA9PSAwICB0aGVuCgkJICAgICAtLSBuZXh0IGJhcgoJCSAgICAgaW5kZXggPSAoaW5kZXgrMSkgJSBuCgkJICBlbmQKCSAgICAgICBlbmQKCSAgICAgICBudW0gPSBwYXR0ZXJuW2slbCsxXQoJICAgIGVsc2UKCSAgICAgICBpbmRleCA9IGluZGV4JW4gKyAxCgkgICAgICAgbnVtID0gcGF0dGVybltpbmRleF0KCSAgICBlbmQKCSAgICBpZiBkZWJ1ZyA+PSAzIHRoZW4KCSAgICAgICBwcmludCgibm90ZSBvbiIsIG51bSwgdikKCSAgICBlbmQKCSAgICBtaWRpb3V0W2tdID0geyB0aW1lID0gdHMsIGRhdGEgPSB7IDB4OTArY2hhbiwgbnVtLCB2IH0gfQoJICAgIGxhc3RfbnVtID0gbnVtCgkgICAgbGFzdF9jaGFuID0gY2hhbgoJICAgIC0tIHdlIHRha2UgYSB2ZXJ5IHNtYWxsIGdhdGUgdmFsdWUgKGNsb3NlIHRvIDApIHRvIG1lYW4gbGVnYXRvCgkgICAgLS0gaW5zdGVhZCwgd2hpY2ggbWVhbnMgdGhlIHNhbWUgYXMgYSAxIGdhdGUgdmFsdWUgaGVyZQoJICAgIGxvY2FsIGxlZ2F0byA9ICBnYXRlX3RzIDwgdGltZS5zYW1wbGVfZW5kCgkgICAgaWYgZ2F0ZSA8IDEgYW5kIG5vdCBsZWdhdG8gdGhlbgoJICAgICAgIC0tIFNldCB0aGUgc2FtcGxlIHRpbWUgYXQgd2hpY2ggdGhlIG5vdGUtb2ZmIGlzIGR1ZS4KCSAgICAgICBsYXN0X2dhdGUgPSBnYXRlX3RzCgkgICAgZWxzZQoJICAgICAgIC0tIE90aGVyd2lzZSBkb24ndCBzZXQgdGhlIG9mZiB0aW1lIGluIHdoaWNoIGNhc2UgdGhlCgkgICAgICAgLS0gbm90ZS1vZmYgZ2V0cyB0cmlnZ2VyZWQgYXV0b21hdGljYWxseSBhYm92ZS4KCSAgICAgICBsYXN0X2dhdGUgPSBuaWwKCSAgICBlbmQKCSAgICBpZiBzd2luZ190aW1lIG9yIHN3aW5nID09IDEgdGhlbgoJICAgICAgIHN3aW5nX3RpbWUgPSBuaWwKCSAgICBlbHNlCgkgICAgICAgaWYgZGVidWcgPj0gNCB0aGVuCgkJICBwcmludCgic3dpbmciLCBzd2luZ19kdXIpCgkgICAgICAgZW5kCgkgICAgICAgc3dpbmdfdGltZSA9IHN3aW5nX3RzCgkgICAgZW5kCgkgZW5kCiAgICAgIGVuZAogICBlbHNlCiAgICAgIC0tIHRyYW5zcG9ydCBub3Qgcm9sbGluZyBvciBieXBhc3M7IHJlc2V0IGFsbCBjYWNoZWQgc3RhdHVzIGluZm9ybWF0aW9uCiAgICAgIGxhc3RfYmVhdCwgbGFzdF90aW1lID0gbmlsLCBuaWwKICAgICAgc3dpbmdfdGltZSA9IG5pbAogICBlbmQKCiAgIGlmIGRlYnVnID49IDEgYW5kICNtaWRpb3V0ID4gMCB0aGVuCiAgICAgIC0tIG1vbml0b3IgbWVtb3J5IHVzYWdlIG9mIHRoZSBMdWEgaW50ZXJwcmV0ZXIKICAgICAgcHJpbnQoc3RyaW5nLmZvcm1hdCgibWVtOiAlMC4yZiBLQiIsIGNvbGxlY3RnYXJiYWdlKCJjb3VudCIpKSkKICAgZW5kCgplbmQK</script>
      <Port id="0" value="2"/>
      <Port id="1" value="1"/>
      <Port id="2" value="1"/>
      <Port id="3" value="6"/>
      <Port id="4" value="100"/>
      <Port id="5" value="100"/>
      <Port id="6" value="76"/>
      <Port id="7" value="0"/>
      <Port id="8" value="1"/>
      <Port id="9" value="0"/>
      <Port id="10" value="1"/>
      <Port id="11" value="0.5"/>
    </luaproc>
    <Controllable name="Division" id="4534" flags="" value="2" parameter="0"/>
    <Controllable name="Octave up" id="4535" flags="" value="1" parameter="1"/>
    <Controllable name="Octave down" id="4536" flags="" value="1" parameter="2"/>
    <Controllable name="Pattern" id="4537" flags="" value="6" parameter="3"/>
    <Controllable name="Velocity 1" id="4538" flags="" value="100" parameter="4"/>
    <Controllable name="Velocity 2" id="4539" flags="" value="100" parameter="5"/>
    <Controllable name="Velocity 3" id="4540" flags="" value="76" parameter="6"/>
    <Controllable name="Latch" id="4541" flags="Toggle" value="0" parameter="7"/>
    <Controllable name="Sync" id="4542" flags="Toggle" value="1" parameter="8"/>
    <Controllable name="Bypass" id="4543" flags="Toggle" value="0" parameter="9"/>
    <Controllable name="Gate" id="4544" flags="" value="1" parameter="10"/>
    <Controllable name="Swing" id="4545" flags="" value="0.5" parameter="11"/>
  </Processor>
  <Processor id="4589" name="MIDI Strum" active="1" user-latency="0" use-user-latency="0" type="lv2" unique-id="http://gareus.org/oss/lv2/midifilter#midistrum" count="1" custom="0">
    <Automation>
      <AutomationList automation-id="parameter-3" id="4590" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-4" id="4591" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-5" id="4592" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-6" id="4593" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-7" id="4594" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-8" id="4595" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-9" id="4596" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-10" id="4597" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-11" id="4598" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
    </Automation>
    <ConfiguredInput>
      <Channels type="midi" count="1"/>
    </ConfiguredInput>
    <CustomSinks>
      <Channels type="midi" count="1"/>
    </CustomSinks>
    <ConfiguredOutput>
      <Channels type="midi" count="1"/>
    </ConfiguredOutput>
    <PresetOutput/>
    <InputMap-0>
      <Channelmap type="midi" from="0" to="0"/>
    </InputMap-0>
    <OutputMap-0>
      <Channelmap type="midi" from="0" to="0"/>
    </OutputMap-0>
    <ThruMap/>
    <lv2 last-preset-uri="" last-preset-label="" parameter-changed-since-last-preset="1" template-dir="/home/justin/.config/ardour8/route_templates/GM Session">
      <Port symbol="bpmsrc" value="1"/>
      <Port symbol="bpm" value="120"/>
      <Port symbol="mode" value="2"/>
      <Port symbol="collect" value="8.8144330978393555"/>
      <Port symbol="duration" value="0.74484539031982422"/>
      <Port symbol="adjspeed" value="0"/>
      <Port symbol="adjvelocity" value="0"/>
      <Port symbol="randspeed" value="0.42783504724502563"/>
      <Port symbol="randvelocity" value="0.63917523622512817"/>
    </lv2>
    <Controllable name="BPM source" id="4580" flags="" value="1" parameter="3" symbol="bpmsrc"/>
    <Controllable name="BPM" id="4581" flags="" value="120" parameter="4" symbol="bpm"/>
    <Controllable name="Strum Direction" id="4582" flags="" value="2" parameter="5" symbol="mode"/>
    <Controllable name="Note Collect Timeout [ms]" id="4583" flags="" value="8.8144330978393555" parameter="6" symbol="collect"/>
    <Controllable name="Strum Duration in Beats" id="4584" flags="" value="0.74484539031982422" parameter="7" symbol="duration"/>
    <Controllable name="Strum Acceleration" id="4585" flags="" value="0" parameter="8" symbol="adjspeed"/>
    <Controllable name="Velocity Change" id="4586" flags="" value="0" parameter="9" symbol="adjvelocity"/>
    <Controllable name="Randomize Acceleration" id="4587" flags="" value="0.42783504724502563" parameter="10" symbol="randspeed"/>
    <Controllable name="Randomize Velocity" id="4588" flags="" value="0.63917523622512817" parameter="11" symbol="randvelocity"/>
  </Processor>
  <Processor id="4642" name="ACE Fluid Synth" active="1" user-latency="0" use-user-latency="0" type="lv2" unique-id="urn:ardour:a-fluidsynth" count="1" custom="0">
    <Automation>
      <AutomationList automation-id="parameter-4" id="4643" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-5" id="4644" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-6" id="4645" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-7" id="4646" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-8" id="4647" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-9" id="4648" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-10" id="4649" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-11" id="4650" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-12" id="4651" interpolation-style="Logarithmic" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-13" id="4652" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-14" id="4653" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-15" id="4654" interpolation-style="Linear" time-domain="BeatTime" state="Off"/>
      <AutomationList automation-id="parameter-16" id="4655" interpolation-style="Discrete" time-domain="BeatTime" state="Off"/>
    </Automation>
    <ConfiguredInput>
      <Channels type="midi" count="1"/>
    </ConfiguredInput>
    <CustomSinks>
      <Channels type="midi" count="1"/>
    </CustomSinks>
    <ConfiguredOutput>
      <Channels type="audio" count="2"/>
      <Channels type="midi" count="1"/>
    </ConfiguredOutput>
    <PresetOutput/>
    <InputMap-0>
      <Channelmap type="midi" from="0" to="0"/>
    </InputMap-0>
    <OutputMap-0>
      <Channelmap type="audio" from="0" to="0"/>
      <Channelmap type="audio" from="1" to="1"/>
    </OutputMap-0>
    <ThruMap/>
    <lv2 last-preset-uri="file:///home/justin/.lv2/ACE_Fluid_Synth_gm.lv2/gm.ttl" last-preset-label="gm" parameter-changed-since-last-preset="1" template-dir="/home/justin/.config/ardour8/route_templates/GM Session" state-dir="state8">
      <Port symbol="level" value="0"/>
      <Port symbol="rev_enable" value="1"/>
      <Port symbol="rev_roomsize" value="0.88350516557693481"/>
      <Port symbol="rev_damp" value="0.5"/>
      <Port symbol="rev_width" value="10"/>
      <Port symbol="rev_level" value="0.10000000149011612"/>
      <Port symbol="chorus_enable" value="1"/>
      <Port symbol="chorus_nr" value="1"/>
      <Port symbol="chorus_speed" value="1"/>
      <Port symbol="chorus_depth" value="0"/>
      <Port symbol="chorus_level" value="0"/>
      <Port symbol="chorus_type" value="0"/>
      <Port symbol="enable" value="1"/>
    </lv2>
    <Controllable name="Output Level" id="4629" flags="" value="0" parameter="4" symbol="level"/>
    <Controllable name="Reverb Enable" id="4630" flags="Toggle" value="1" parameter="5" symbol="rev_enable"/>
    <Controllable name="Reverb Roomsize" id="4631" flags="" value="0.88350516557693481" parameter="6" symbol="rev_roomsize"/>
    <Controllable name="Reverb Damping" id="4632" flags="" value="0.5" parameter="7" symbol="rev_damp"/>
    <Controllable name="Reverb Width" id="4633" flags="" value="10" parameter="8" symbol="rev_width"/>
    <Controllable name="Reverb Dry/Wet" id="4634" flags="" value="0.10000000149011612" parameter="9" symbol="rev_level"/>
    <Controllable name="Chorus Enable" id="4635" flags="Toggle" value="1" parameter="10" symbol="chorus_enable"/>
    <Controllable name="Chorus Voice Count" id="4636" flags="" value="1" parameter="11" symbol="chorus_nr"/>
    <Controllable name="Chorus Speed" id="4637" flags="" value="1" parameter="12" symbol="chorus_speed"/>
    <Controllable name="Chorus Depth" id="4638" flags="" value="0" parameter="13" symbol="chorus_depth"/>
    <Controllable name="Chorus Level" id="4639" flags="" value="0" parameter="14" symbol="chorus_level"/>
    <Controllable name="Chorus Type" id="4640" flags="" value="0" parameter="15" symbol="chorus_type"/>
    <Controllable name="Enable" id="4641" flags="Toggle" value="1" parameter="16" symbol="enable"/>
    <Controllable name="property-urn:ardour:a-fluidsynth:sf2file" id="4628" flags="NotAutomatable" property="75"/>
  </Processor>
  <Processor id="4656" name="Amp" active="1" user-latency="0" use-user-latency="0" type="amp">
    <Automation>
      <AutomationList automation-id="gain" id="4657" interpolation-style="Exponential" time-domain="AudioTime" state="Off"/>
    </Automation>
    <Controllable name="gaincontrol" id="4658" flags="GainLike" value="1"/>
  </Processor>
  <Processor id="4659" name="meter-ACE Fluid Synth" active="1" user-latency="0" use-user-latency="0" type="meter"/>
  <Processor id="4660" name="Ace Fluid Synth Session" active="1" user-latency="0" use-user-latency="0" own-input="1" own-output="0" output="Ace Fluid Synth Session" type="main-outs" role="Main">
    <PannerShell bypassed="0" user-panner="" linked-to-route="1"/>
  </Processor>
  <Slavable/>
  <Controllable name="monitor" id="4683" flags="RealTime" value="0" monitoring=""/>
  <Controllable name="rec-safe" id="4684" flags="Toggle,RealTime" value="0"/>
  <Controllable name="rec-enable" id="4685" flags="Toggle,RealTime" value="0"/>
  <Controllable name="midicc-0-0" id="4676" flags="" value="0"/>
  <Controllable name="midicc-0-32" id="4678" flags="" value="0"/>
  <Controllable name="midi-pgm-change-0" id="4680" flags="" value="0"/>
</Route>
